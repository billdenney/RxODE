<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RxODE Benchmarking â€¢ RxODE</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><meta property="og:title" content="RxODE Benchmarking">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RxODE</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.7.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/RxODE-covariates.html">RxODE Covariates</a>
    </li>
    <li>
      <a href="../articles/RxODE-data-frame.html">RxODE Data Frames</a>
    </li>
    <li>
      <a href="../articles/RxODE-events.html">RxODE Events</a>
    </li>
    <li>
      <a href="../articles/RxODE-intro.html">Introduction to RxODE</a>
    </li>
    <li>
      <a href="../articles/RxODE-mix-lin-ode.html">RxODE Solved Systems and ODEs</a>
    </li>
    <li>
      <a href="../articles/RxODE-shiny.html">RxODE and Shiny</a>
    </li>
    <li>
      <a href="../articles/RxODE-sim-var.html">RxODE Simulation</a>
    </li>
    <li>
      <a href="../articles/RxODE-speed.html">RxODE Benchmarking</a>
    </li>
    <li>
      <a href="../articles/RxODE-stiff.html">RxODE Jacobian specification and Stiff Systems</a>
    </li>
    <li>
      <a href="../articles/RxODE-syntax.html">RxODE ODE solving syntax</a>
    </li>
    <li>
      <a href="../articles/RxODE-transit-compartments.html">RxODE Transit Compartment Models</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nlmixrdevelopment/RxODE">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>RxODE Benchmarking</h1>
                        <h4 class="author">Matthew L. Fidler</h4>
            
            <h4 class="date">2018-05-11</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nlmixrdevelopment/RxODE/blob/master/vignettes/RxODE-speed.Rmd"><code>vignettes/RxODE-speed.Rmd</code></a></small>
      <div class="hidden name"><code>RxODE-speed.Rmd</code></div>

    </div>

    
    
<div id="setup-the-rxode-models-and-event-table-for-comparison" class="section level2">
<h2 class="hasAnchor">
<a href="#setup-the-rxode-models-and-event-table-for-comparison" class="anchor"></a>Setup the RxODE models and event table for comparison</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RxODE)

ver &lt;-<span class="st"> </span><span class="kw">packageVersion</span>(<span class="st">"RxODE"</span>)

ver.no &lt;-<span class="st"> </span>ver<span class="op">$</span>minor

et &lt;-<span class="st"> </span><span class="kw"><a href="../reference/eventTable.html">eventTable</a></span>();
et<span class="op">$</span><span class="kw"><a href="../reference/add.dosing.html">add.dosing</a></span>(<span class="dt">dose=</span><span class="dv">3</span>, <span class="dt">nbr.doses=</span><span class="dv">6</span>, <span class="dt">dosing.interval=</span><span class="dv">8</span>)
et<span class="op">$</span><span class="kw"><a href="../reference/add.sampling.html">add.sampling</a></span>(<span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">48</span>, <span class="dt">length.out=</span><span class="dv">200</span>))

<span class="cf">if</span> (ver.no <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>){
    solve.1c &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>({
        C2 =<span class="st"> </span><span class="kw">linCmt</span>(CL, V);
    })
    solve.1c.ka &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>({
        C2 =<span class="st"> </span><span class="kw">linCmt</span>(V, CL, KA);
    })
    solve.2c &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>({
        C2=<span class="kw">linCmt</span>(V, CL, V2, Q);
    })
    solve.2c.ka &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>({
        C2=<span class="kw">linCmt</span>(V, CL, V2, Q, KA);
    })
    solve.3c &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>({
        ## double solvedC(double t, int parameterization, int cmt, unsigned int col, double p1, double p2, double p3, double p4, double p5, double p6, double p7, double p8);
        C2=<span class="kw">linCmt</span>(V, CL, V2, Q, Q2, V3);
    })
    solve.3c.ka &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>({
        ## double solvedC(double t, int parameterization, int cmt, unsigned int col, double p1, double p2, double p3, double p4, double p5, double p6, double p7, double p8);
        C2=<span class="kw">linCmt</span>(V, CL, V2, Q, Q2, V3, KA);
    })
}

ode.1c &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>(<span class="st">"</span>
<span class="st">C2 = center/V;</span>
<span class="st">d/dt(center) = - CL*C2;</span>
<span class="st">"</span>,<span class="st">"ode1c"</span>)

ode.1c.ka &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>(<span class="st">"</span>
<span class="st">    C2 = center/V;</span>
<span class="st">    d/dt(depot) = -KA * depot;</span>
<span class="st">    d/dt(center) = KA * depot - CL*C2;</span>
<span class="st">"</span>,<span class="st">"ode1cka"</span>)

ode.2c &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>(<span class="st">"</span>
<span class="st">    C2 = centr/V;</span>
<span class="st">    C3 = peri/V2;</span>
<span class="st">    d/dt(centr) = - CL*C2 - Q*C2 + Q*C3;</span>
<span class="st">    d/dt(peri)  = Q*C2 - Q*C3;</span>
<span class="st">"</span>, <span class="st">"ode2c"</span>)


ode.2c.ka &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>(<span class="st">"</span>
<span class="st">   C2 = centr/V;</span>
<span class="st">   C3 = peri/V2;</span>
<span class="st">   d/dt(depot) =-KA*depot;</span>
<span class="st">   d/dt(centr) = KA*depot - CL*C2 - Q*C2 + Q*C3;</span>
<span class="st">   d/dt(peri)  =                    Q*C2 - Q*C3;</span>
<span class="st">"</span>,<span class="st">"ode2cka"</span>)

ode.3c &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>(<span class="st">"</span>
<span class="st">     C2 = centr/V;</span>
<span class="st">     C3 = peri/V2;</span>
<span class="st">     C4 = peri2 / V3;</span>
<span class="st">     d/dt(centr) = - CL*C2 - Q*C2 + Q*C3  - Q2*C2 + Q2*C4;</span>
<span class="st">     d/dt(peri)  = Q*C2 - Q*C3;</span>
<span class="st">     d/dt(peri2) = Q2 * C2 - Q2 * C4;</span>
<span class="st"> "</span>,<span class="st">"ode3c"</span>)
 
 ode.3c.ka &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RxODE.html">RxODE</a></span>(<span class="st">"</span>
<span class="st">     C2 = centr/V;</span>
<span class="st">     C3 = peri/V2;</span>
<span class="st">     C4 = peri2 / V3;</span>
<span class="st">     d/dt(depot) =-KA*depot;</span>
<span class="st">     d/dt(centr) = KA*depot- CL*C2 - Q*C2 + Q*C3  - Q2*C2 + Q2*C4;</span>
<span class="st">     d/dt(peri)  = Q*C2 - Q*C3;</span>
<span class="st">     d/dt(peri2) = Q2 * C2 - Q2 * C4;</span>
<span class="st"> "</span>,<span class="st">"ode3cka"</span>)</code></pre></div>
</div>
<div id="benchmarking-the-models" class="section level2">
<h2 class="hasAnchor">
<a href="#benchmarking-the-models" class="anchor"></a>Benchmarking the Models</h2>
<p>These benchmark the single solve</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(microbenchmark)

<span class="cf">if</span> (ver.no <span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span>){
    res.rxSolve &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(<span class="dt">solved.1c=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(solve.1c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>), <span class="dt">events=</span>et),
                                  <span class="dt">solved.1c.ka=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(solve.1c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et),
                                  <span class="dt">solved.2c=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(solve.2c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>), <span class="dt">events=</span>et),
                                  <span class="dt">solved.2c.ka=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(solve.2c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et),
                                  <span class="dt">solved.3c=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(solve.3c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>), <span class="dt">events=</span>et),
                                  <span class="dt">solved.3c.ka=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(solve.3c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et) 
                                  )
}

<span class="cf">if</span> (ver.no <span class="op">&lt;</span><span class="st"> </span><span class="dv">7</span>){
    res.run &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(
        <span class="dt">ode.1c.lsoda=</span>ode.1c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">TRUE</span>),
        <span class="dt">ode.1c.dop=</span>ode.1c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">FALSE</span>),
        <span class="dt">ode.1c.ka.lsoda=</span>ode.1c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">TRUE</span>),
        <span class="dt">ode.1c.ka.dop=</span>ode.1c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">FALSE</span>),
        <span class="dt">ode.2c.lsoda=</span>ode.2c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">TRUE</span>),
        <span class="dt">ode.2c.dop=</span>ode.2c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">FALSE</span>),
        <span class="dt">ode.2c.ka.lsoda=</span>ode.2c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">TRUE</span>),
        <span class="dt">ode.2c.ka.dop=</span>ode.2c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">FALSE</span>),
        <span class="dt">ode.3c.lsoda=</span>ode.3c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">TRUE</span>),
        <span class="dt">ode.3c.dop=</span>ode.3c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">FALSE</span>),
        <span class="dt">ode.3c.ka.lsoda=</span>ode.3c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">TRUE</span>),
        <span class="dt">ode.3c.ka.dop=</span>ode.3c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">stiff=</span><span class="ot">FALSE</span>))
} <span class="cf">else</span> {
    res.run &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(
        <span class="dt">ode.1c.lsoda=</span>ode.1c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>),
        <span class="dt">ode.1c.liblsoda=</span>ode.1c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>),
        <span class="dt">ode.1c.dop=</span>ode.1c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>),
        <span class="dt">ode.1c.ka.lsoda=</span>ode.1c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>),
        <span class="dt">ode.1c.ka.liblsoda=</span>ode.1c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>),
        <span class="dt">ode.1c.ka.dop=</span>ode.1c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>),
        <span class="dt">ode.2c.lsoda=</span>ode.2c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>),
        <span class="dt">ode.2c.liblsoda=</span>ode.2c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>),
        <span class="dt">ode.2c.dop=</span>ode.2c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>),
        <span class="dt">ode.2c.ka.lsoda=</span>ode.2c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>),
        <span class="dt">ode.2c.ka.liblsoda=</span>ode.2c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>),
        <span class="dt">ode.2c.ka.dop=</span>ode.2c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>),
        <span class="dt">ode.3c.lsoda=</span>ode.3c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>),
        <span class="dt">ode.3c.liblsoda=</span>ode.3c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>),
        <span class="dt">ode.3c.dop=</span>ode.3c<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>),
        <span class="dt">ode.3c.ka.lsoda=</span>ode.3c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>),
        <span class="dt">ode.3c.ka.liblsoda=</span>ode.3c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>),
        <span class="dt">ode.3c.ka.dop=</span>ode.3c.ka<span class="op">$</span><span class="kw">run</span>(<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>))
    res.run.df &lt;-<span class="st"> </span><span class="kw">microbenchmark</span>(
        <span class="dt">ode.1c.lsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.1c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.1c.liblsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.1c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.1c.dop=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.1c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.1c.ka.lsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.1c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.1c.ka.liblsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.1c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.1c.ka.dop=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.1c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.2c.lsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.2c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.2c.liblsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.2c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.2c.dop=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.2c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.2c.ka.lsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.2c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.2c.ka.liblsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.2c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.2c.ka.dop=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.2c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.3c.lsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.3c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.3c.liblsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.3c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.3c.dop=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.3c, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.3c.ka.lsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.3c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"lsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.3c.ka.liblsoda=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.3c.ka, <span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"liblsoda"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>),
        <span class="dt">ode.3c.ka.dop=</span><span class="kw"><a href="../reference/rxSolve.html">rxSolve</a></span>(ode.3c.ka,<span class="dt">params=</span><span class="kw">c</span>(<span class="dt">V=</span><span class="dv">20</span>, <span class="dt">CL=</span><span class="dv">25</span>, <span class="dt">V2=</span><span class="dv">297</span>, <span class="dt">Q=</span><span class="dv">10</span>, <span class="dt">Q2=</span><span class="dv">7</span>, <span class="dt">V3=</span><span class="dv">400</span>, <span class="dt">KA=</span><span class="dv">2</span>), <span class="dt">events=</span>et, <span class="dt">method=</span><span class="st">"dop853"</span>, <span class="dt">return.type=</span><span class="st">"data.frame"</span>))
}</code></pre></div>
<div id="solve-speeds" class="section level3">
<h3 class="hasAnchor">
<a href="#solve-speeds" class="anchor"></a>0.5 Solve speeds</h3>
<p>0.5.3 solve speeds</p>
<p>(These should be run on the same machine, and were run on my machine; CRAN machines may give different results)</p>
<p>Unit: microseconds expr min lq mean median uq max neval ode.1c.lsoda 347.627 390.9135 551.1030 438.6620 715.3360 1004.950 100 ode.1c.dop 511.401 595.7410 834.2383 866.6135 1006.0660 1671.645 100 ode.1c.ka.lsoda 360.568 409.4325 612.0649 527.9115 770.4475 1848.805 100 ode.1c.ka.dop 517.201 601.9885 940.1150 907.4450 1092.6385 4294.690 100 ode.2c.lsoda 380.203 425.2745 606.0941 541.9680 791.6435 965.234 100 ode.2c.dop 525.680 578.7840 865.9800 709.3110 1047.5675 3695.825 100 ode.2c.ka.lsoda 402.515 464.5445 709.5700 730.5075 846.5330 2250.428 100 ode.2c.ka.dop 535.051 618.2770 929.9272 995.1330 1110.2645 3730.632 100 ode.3c.lsoda 419.919 505.3765 769.5949 781.1570 918.6020 2007.223 100 ode.3c.dop 553.348 627.6475 920.1455 799.4530 1068.7640 4702.114 100 ode.3c.ka.lsoda 418.135 479.9395 677.4090 539.9600 871.2995 1700.651 100 ode.3c.ka.dop 576.998 662.4550 953.7390 911.4620 1166.7150 3182.640 100</p>
</div>
<div id="solve-speeds-1" class="section level3">
<h3 class="hasAnchor">
<a href="#solve-speeds-1" class="anchor"></a>0.6 solve speeds</h3>
</div>
<div id="solve-speeds-2" class="section level3">
<h3 class="hasAnchor">
<a href="#solve-speeds-2" class="anchor"></a>0.7 solve speeds</h3>
<p>(rxSolve object)</p>
<blockquote>
<p>res.run Unit: microseconds expr min lq mean median uq max ode.1c.lsoda 502.922 537.2825 715.7685 591.9480 909.4535 1816.675 ode.1c.liblsoda 521.664 552.6785 744.0963 618.0535 841.1775 3079.110 ode.1c.dop 401.178 444.9095 567.4981 477.7090 629.8795 1828.278 ode.1c.ka.lsoda 531.035 581.4615 764.2354 629.8795 962.1105 1356.593 ode.1c.ka.liblsoda 590.833 630.3250 830.7398 765.3155 963.6730 2482.477 ode.1c.ka.dop 454.727 494.6660 629.8211 543.9760 754.3820 1300.367 ode.2c.lsoda 537.729 589.2710 764.1283 625.1935 991.7860 1331.158 ode.2c.liblsoda 601.096 630.1020 1287.7422 689.0070 917.9320 44045.559 ode.2c.dop 461.867 512.2925 625.1265 540.8530 714.8890 1130.792 ode.2c.ka.lsoda 564.504 626.7555 775.5078 663.1250 877.3235 1595.783 ode.2c.ka.liblsoda 643.490 676.5125 892.7102 734.0780 953.4090 4341.099 ode.2c.ka.dop 495.335 529.6965 669.7514 572.5355 730.9550 1216.026 ode.3c.lsoda 579.230 626.7550 758.1976 674.9505 792.3135 1771.604 ode.3c.liblsoda 645.275 683.2055 920.6498 768.6620 1045.7820 4960.938 ode.3c.dop 508.723 557.8100 697.0037 614.7070 798.3375 1271.806 ode.3c.ka.lsoda 606.898 659.5545 937.0584 726.2685 1098.6625 7517.046 ode.3c.ka.liblsoda 668.926 702.8405 950.7582 761.2995 1027.2630 5412.987 ode.3c.ka.dop 529.696 583.9160 762.1783 676.7350 956.5325 1344.098</p>
</blockquote>
<p>Data frame object &gt; res.run.df Unit: microseconds expr min lq mean median uq max neval ode.1c.lsoda 479.270 515.6400 659.1886 549.7770 810.6090 1253.956 100 ode.1c.liblsoda 486.410 541.5215 714.6930 606.6740 872.4145 1431.563 100 ode.1c.dop 373.510 412.5570 531.8384 442.2315 619.8385 1844.789 100 ode.1c.ka.lsoda 505.599 558.7030 755.0517 646.8370 898.2975 1957.690 100 ode.1c.ka.liblsoda 560.488 597.0800 737.9381 650.4065 814.8490 1258.419 100 ode.1c.ka.dop 422.151 466.1065 604.0682 517.6480 737.2020 1328.927 100 ode.2c.lsoda 511.400 554.4630 723.1092 631.4410 837.8305 2586.899 100 ode.2c.liblsoda 579.230 607.5670 769.5324 685.2135 889.8185 1670.306 100 ode.2c.dop 435.984 486.8570 648.8581 560.9340 790.7515 1608.278 100 ode.2c.ka.lsoda 531.481 568.0735 736.1441 617.8305 947.6075 1550.711 100 ode.2c.ka.liblsoda 608.237 640.3660 817.8566 673.1655 914.3620 3078.218 100 ode.2c.ka.dop 468.114 513.8545 729.6423 653.0840 900.9750 2146.453 100 ode.3c.lsoda 543.530 584.8080 785.2538 625.4165 922.6175 3519.558 100 ode.3c.liblsoda 633.226 662.4545 836.5320 701.9475 863.7130 4795.827 100 ode.3c.dop 483.287 520.3250 699.7169 625.4165 836.4915 1783.206 100 ode.3c.ka.lsoda 581.461 620.2850 774.5928 677.1815 828.2360 1986.250 100 ode.3c.ka.liblsoda 655.538 687.4450 981.1119 743.4490 992.2325 12715.388 100 ode.3c.ka.dop 497.120 545.3155 685.4102 584.5855 804.3615 1288.764 100</p>
</div>
</div>
<div id="backward-old-c-interface" class="section level2">
<h2 class="hasAnchor">
<a href="#backward-old-c-interface" class="anchor"></a>Backward old-c interface</h2>
<p>This is a measure of how fast the SAEM algorithm will run in nlmixr</p>
<pre><code>demo &lt;- structure(list(ID = c(1012, 1012, 1012, 1012, 1012, 1012, 1012, 1012), TIME = c(588.5, 600.5, 612.5, 624.5, 636.5, 648.5, 660.5, 672.5), DOSE = c(2000, 2000, 2000, 2000, 2000, 2000, 2000, 2000), AMT = c(1000, 1000, 1000, 1000, 1000, 1000, 1000, 0), TAD = c(0, 0, 0, 0, 0, 0, 0, 12), CL = c(5.851496056, 5.851496056, 5.851496056, 5.851496056, 5.851496056, 5.851496056, 5.851496056, 5.851496056), V = c(49.3930186, 49.3930186, 49.3930186, 49.3930186, 49.3930186, 49.3930186, 49.3930186, 49.3930186), KA = c(3.320205555, 3.320205555, 3.320205555, 3.320205555, 3.320205555, 3.320205555, 3.320205555, 3.320205555), TAD4 = c(0, 12, 24, 36, 48, 60, 72, 84)), .Names = c("ID", "TIME", "DOSE", "AMT", "TAD", "CL", "V", "KA", "TAD4"), row.names = c(NA, -8L), class = c("data.frame"), sorted = c("ID", "TIME"));

ode1KA &lt;- "
d/dt(abs)    = -KA*abs;
d/dt(centr)  =  KA*abs-(CL/V)*centr;
C1=centr/V;
"

StepSize=1
Extension=6

mod1KA &lt;- RxODE(model=ode1KA)

params &lt;- demo[1,c("CL","V","KA")]

ev&lt;-eventTable()
DOSi&lt;-as.data.frame(demo[demo$AMT&gt;0,])
for (j in 1:length(DOSi$AMT)){
    dos&lt;-DOSi[j,]
    ev$add.dosing(dose=as.numeric(dos$AMT),nbr.doses=1,dosing.to=1,rate=NULL,start.time=as.numeric(dos$TAD4))
}
timei&lt;-demo$TIME
minimum&lt;-min(timei)
maximum&lt;-max(timei)+Extension
times&lt;-sort(unique(c(timei,seq(minimum,maximum,StepSize))))
ev$add.sampling(times)

x &lt;- as.data.frame(mod1KA$run(params, ev))

## test old solving.
event.table &lt;- ev$get.EventTable()
modelVars &lt;- mod1KA$get.modelVars()
state_vars &lt;- modelVars$state;
neq &lt;- length(state_vars);
lhs_vars &lt;- modelVars$lhs;
nlhs &lt;- length(lhs_vars);

ntime &lt;- dim(event.table)[1];
ret &lt;- rep(0.0, ntime * neq);
lhs &lt;- rep(0.0, ntime * nlhs);
rc &lt;- as.integer(0)

inits &lt;- rep(0.0, neq)

cmpMgr &lt;- mod1KA$cmpMgr;

## cmpMgr$dynLoad()

atol &lt;- 1e-8
rtol &lt;- 1e-6
transit_abs &lt;- FALSE
stiff &lt;- TRUE

ode_solve &lt;- cmpMgr$ode_solver;

library(microbenchmark)

res &lt;- microbenchmark(rxode.lsoda = mod1KA$dll$.c(ode_solve,
                                                  as.integer(neq),
                                                  as.double(params),
                                                  as.double(event.table$time),
                                                  as.integer(event.table$evid),
                                                  length(event.table$time),
                                                  as.double(inits),
                                                  as.double(event.table$amt[event.table$evid &gt; 0]),
                                                  as.double(ret),
                                                  as.double(atol),
                                                  as.double(rtol),
                                                  as.integer(TRUE),
                                                  as.integer(transit_abs),
                                                  as.integer(nlhs),
                                                  as.double(lhs),
                                                  rc),
                      rxode.dop = mod1KA$dll$.c(ode_solve,
                                                  as.integer(neq),
                                                  as.double(params),
                                                  as.double(event.table$time),
                                                  as.integer(event.table$evid),
                                                  length(event.table$time),
                                                  as.double(inits),
                                                  as.double(event.table$amt[event.table$evid &gt; 0]),
                                                  as.double(ret),
                                                  as.double(atol),
                                                  as.double(rtol),
                                                  as.integer(FALSE),
                                                  as.integer(transit_abs),
                                                  as.integer(nlhs),
                                                  as.double(lhs),
                                                rc),
                      times=5000L
                      )</code></pre>
<div id="speed" class="section level3">
<h3 class="hasAnchor">
<a href="#speed" class="anchor"></a>0.6 speed</h3>
<blockquote>
<p>res Unit: microseconds expr min lq mean median uq max neval rxode.lsoda 465.883 520.102 683.5532 585.032 838.723 9688.488 5000 rxode.dop 5453.596 5865.928 6381.3596 6036.396 6751.062 44734.565 5000</p>
</blockquote>
</div>
<div id="speed-1" class="section level3">
<h3 class="hasAnchor">
<a href="#speed-1" class="anchor"></a>0.7 speed</h3>
<p>Unit: microseconds expr min lq mean median uq max neval rxode.lsoda 447.14 496.674 632.594 548.439 766.431 4618.22 5000 rxode.dop 5288.93 5667.348 6113.333 5797.206 6430.432 23199.09 5000</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#setup-the-rxode-models-and-event-table-for-comparison">Setup the RxODE models and event table for comparison</a></li>
      <li><a href="#benchmarking-the-models">Benchmarking the Models</a></li>
      <li><a href="#backward-old-c-interface">Backward old-c interface</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Matthew L. Fidler, Melissa Hallow, Wenping Wang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
